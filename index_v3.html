<html lang="en">
<head>

	<meta charset="utf-8" />
	<link rel="stylesheet" type="text/css" href="mystyle_v3.css" />

	
	<script>
		function open_Side_Panel_View()
		{
			document.getElementById("slide_panel_view_JavaScript").style.width = "220px";
		}

		function close_Side_Panel_View()
		{
			document.getElementById("slide_panel_view_JavaScript").style.width = "0";
		}

		function dropAllowed(ev1)
		{

			ev1.preventDefault();

		}

		function drag_func(ev1)
		{

			ev1.dataTransfer.setData("text", ev1.target.id);

		}

		function drop_func(ev1)
		{

			ev1.preventDefault();
			var target_data = ev1.dataTransfer.getData("text");
			ev1.target.appendChild(document.getElementById(target_data));
		}



		function showLocation(position)
		{
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            var latlongvalue = position.coords.latitude + ","
            + position.coords.longitude;
            var img_url = "https://maps.googleapis.com/maps/api/staticmap?center="
            +latlongvalue+"&amp;zoom=14&amp;size=400x300&amp;key=AIzaSyBNXhFrEe_UI6enhCV9_qBqNY7oH0MSMhU";
            document.getElementById("mapholder").innerHTML =
            "<img src='"+img_url+"'>";
		}
		 
		function errorHandler(err)
		{
			if(err.code == 1)
			{
               alert("Error: Access is denied!");
			} 
			else if( err.code == 2)
			{
               alert("Error: Position is unavailable!");
            }
		}
		
		function getLocation()
		{
			if(navigator.geolocation)
			{
               // timeout at 60000 milliseconds (60 seconds)
               var options = {timeout:60000};
               navigator.geolocation.getCurrentPosition
               (showLocation, errorHandler, options);
			}
			else
			{
               alert("Sorry, browser does not support geolocation!");
            }
		}

		function ValidateEmail(inputText)
		{
			var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
			if(inputText.value.match(mailformat))
			{
				document.form1.text1.focus();
				return true;
			}
			else
			{
				alert("You have entered an invalid email address!");
				document.form1.text1.focus();
				return false;
			}
		}

		let items = [];

		function addToCart(product, price){
		
			var current = document.getElementById("items_html");

			var checker = false;

			for (var i = 0; i < items.length; i++){
		
				if (items[i] == product){

					checker = true;
					break;
			
				}
		
			}

			items.push(product);

			if (checker == false){
		
				var total_price_element = document.getElementById("price_total");
				var tot_price = parseFloat(total_price_element.innerHTML);
				tot_price += price;
				current.innerHTML = current.innerHTML + '<p>' + product + '<span class="price">$<section id="total_price">' + price + '</section></span></p>';
				total_price_element.innerHTML = tot_price;
			
			}
		
		}

				Storage.prototype.setObj = function(key, obj) {
					return this.setItem(key, JSON.stringify(obj))
				}
				Storage.prototype.getObj = function(key) {
					return JSON.parse(this.getItem(key))
				}

		function submit_stuff(){

			var total_price_post = parseFloat(document.getElementById("price_total").innerHTML);

			sessionStorage.setItem("Total_Price", total_price_post);
			sessionStorage.setItem("Items", items);

			window.open("Checkout_v3.html", "_self");
			
		
		}

		/*
		function validatecardnumber(cardnumber)
		{
    		// Strip spaces and dashes
    		cardnumber = cardnumber.replace(/[ -]/g, '');
    		// See if the card is valid
    		// The regex will capture the number in one of the capturing groups
    		var match = /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|↵
  			(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])↵
  			[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.exec(cardnumber);
			if (match)
			{
      			// List of card types, in the same order as the regex capturing groups
      			var types = ['Visa', 'MasterCard', 'Discover', 'American Express',
            	'Diners Club', 'JCB'];
      			// Find the capturing group that matched
      			// Skip the zeroth element of the match array (the overall match)
				for (var i = 1; i < match.length; i++) 
				{
					if (match[i])
					{
         				// Display the card type for that group
          				document.getElementById('notice').innerHTML = types[i - 1];
          				break;
        			}
    			}
			}
			else
			{
      			document.getElementById('notice').innerHTML = '(invalid card number)';
    		}
  		}	*/

	</script>

	</head>


	<body>

		<div class="heading">

			<div class="banner-image">
				<!-- The side panel starts from here -->
				<div class="slide_panel_view" id="slide_panel_view_JavaScript">
					<a href="#" class="side_panel_close_button" onclick="close_Side_Panel_View()">x</a>
					<a href="#">Computer/Laptop</a>
					<a href="#">Mobile Phones</a>
					<a href="#">Gaming Console</a>
					<a href="#">Electronic Watch</a>
					<a href="#">Camera</a>
					<a href="#">TV</a>
				</div>

				<button class="side_panel_open_button" onclick="open_Side_Panel_View()">☰</button>
				<!-- The side panel ends  here -->
				<button onclick="getLocation();" value="Get Location">Locate Store</button>

				<div class="banner-text">
					<h1 style="font-size:40px">ISIT207 Online Store</h1>


				</div>
			</div>
			


		</div>

		<hr />

		<!-- The search bar starts from here -->
		<div class="search_bar_sticky">
			<form class="search_bar_forum">
				<input type="text" placeholder="Search..." />
				<button type="submit">Submit</button>
			</form>
		</div>
		<!-- The search bar ends here -->
		<br />

		<div>
		<div id="left_box">
					<table>
						<tr><td class="side_menu_data" style="padding-top:7em"><button class="side_menu">Cars</button></td></tr>
						<tr><td class="side_menu_data"><button class="side_menu">Cameras</button></td></tr>
						<tr><td class="side_menu_data"><button class="side_menu">Electronics</button></td></tr>
						<tr><td class="side_menu_data"><button class="side_menu">Music</button></td></tr>
						<tr><th>Drag and Drop</th></tr>
						<tr><td class="side_menu_data"><div class="drag_divs" ondrop="drop_func(event)" ondragover="dropAllowed(event)"><img src="summer.jpg" class="img_fit_container" draggable="true" ondragstart="drag_func(event)" id="summer_pic" /></div></td></tr>
						<tr><td><div class="drag_divs" ondrop="drop_func(event)" ondragover="dropAllowed(event)"></div></td></tr>
						<tr><td>
								<table id="filter_menu_box">
									<tr id="filter_menu_header_row">
										<th id="filter_menu_header">Filter Menu</th>
									</tr>
									<tr>
										<td class="filter_menu_options_header"><b>Availability</b></td>
									</tr>
									<tr>
										<td class="filter_menu_options">
											<input type="checkbox">Available Now
										</td>
									</tr>
									<tr>
										<td class="filter_menu_options">
											<input type="checkbox">Available Soon
										</td>
									</tr>

									<tr>
										<td class="filter_menu_options_header"><b>Price</b></td>
									</tr>
									<tr>
										<td class="filter_menu_options">
											Upper Limit:
											<input type="text" size="3" class="filter_menu_input_box_text">
										</td>
									</tr>
									<tr>
										<td class="filter_menu_options">
											Lower Limit:
											<input type="text" size="3" class="filter_menu_input_box_text">
										</td>
									</tr>
									<tr>
										<td class="filter_menu_options">
											<button id="filter_menu_price_search_button">Go</button>
										</td>
									</tr>
									<tr>
										<td class="filter_menu_options_header"><b>Brand</b></td>
									</tr>
								</table>
					</td></tr>
					</table>
				</div>

				<div id="middle_box">
						<table border="0">
							<tr><td><div class="thumbwrap">
									<a class="thumb" href="#">
										<img src="item_img/samsungtv.jpg" alt="">
										<span>
											<img src="item_img_BIG/samsungtv.jpg" alt=""> <p>Word placeholder</p>
										</span>
									</a>
								</div></td>
								<td><h2>55" Q80T QLED Smart 4K TV (2020)</h2>
									<ul>
										<li>200Hz Motion Rate</li>
										<li>Samsung Intelligent Mode</li>
										<li>Easily access Netflix, YouTube and Xbox</li>
										<li>The whole family will love it</li>
									</ul>
									<p align="center"><u>$2,299.00</u></p>
									<a href="https://www.samsung.com/au/tvs/qledtv-q80t/QA55Q80TAWXXY/" target="blank">Link to manufacturer</a>
									<button onclick="addToCart('55 inch Q80T QLED Smart 4K TV (2020)', 2299)">Add to cart!</button>
								</td>
							</tr>
							<tr><td><div class="item_img"><div class="thumbwrap">
									<a class="thumb" href="#">
										<img src="item_img/sonytv.jpg" alt="">
										<span>
											<img src="item_img_BIG/sonytv.jpg" alt=""> <p>Word placeholder</p>
										</span>
									</a>
								</div></div></td>
								<td>
									<h2>65" KD-65X9500H FULL ARRAY LED 4K ANDROID TV</h2>
									<ul>
										<li>Works with Google home</li>
										<li>Voice activated</li>
										<li>Stylish design</li>
										<li>XDR Contrast 6x</li>
									</ul>
									<p align="center"><u>$2,995.00</u></p>
									<a href="https://store.sony.com.au/television-4K-X9500/KD65X9500H.html?gclid=Cj0KCQjw-O35BRDVARIsAJU5mQUqglPypJQ_6SCTh7Qxw_7Sa2nFZ684GqY7eqHAuhnf4e2fd3DEBBsaApXqEALw_wcB" target="blank">Link to manufacturer</a>
									<button onclick="addToCart('65 inch KD-65X9500H FULL ARRAY LED 4K ANDROID TV', 2995)">Add to cart!</button>
								</td>
							</tr>
							<tr><td><div class="item_img"><div class="thumbwrap">

									<a class="thumb" href="#">
										<img src="item_img/camera.jpg" alt="">
										<span>
											<img src="item_img_BIG/camera.jpg" alt=""> <p>Word placeholder</p>
										</span>
									</a>
								</div></div></td>
								<td>
									<ul>
										<li>info line 1</li>
										<li>info line 2</li>
										<li>info line 3</li>
										<li>info line 4</li>
									</ul>
									<p></p>
								</td>
							</tr>
						</table>
				</div>
				<div id="right_box">
					<div class="container">
						<h3>Shopping Cart</h3>
						<span class="price" style="color:black">
							<i class="fa fa-shopping-cart"></i>
						</span>
						<section id="items_html">
						</section>
						<hr />
						<p>Total <span class="price" style="color:black"><b>$<span id="price_total">0</span></b></span></p>
					</div>
					<button value="to_checkout" class="btn" onclick="submit_stuff()">Continue to Checkout</button>
					<section id="out">

					</section>
				</div>
			</div>
	</body>
</html>
