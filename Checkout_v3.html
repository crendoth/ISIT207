<html lang="en">
<head>

	<meta charset="utf-8" />
	<link rel="stylesheet" type="text/css" href="mystyle.css" />

	
	<script>

        Storage.prototype.setObj = function(key, obj) {
					return this.setItem(key, JSON.stringify(obj))
				}
				Storage.prototype.getObj = function(key) {
					return JSON.parse(this.getItem(key))
				}

        function loader(){
        
            var items = sessionStorage.getItem("Items");

            
            var out = document.getElementById("bubs_total");
            out.innerHTML = '<p><a href="#">';

            for (var x = 0; x < items.length; x++){

            if (items[x] === ","){
                
                out.innerHTML += '</a></p><p><a href="#">';
        
            } else {
        
                out.innerHTML += items[x];
        
            }

             document.getElementById("aha").innerHTML = sessionStorage.getItem("Total_Price");
        
            }

        }
		function open_Side_Panel_View()
		{
		document.getElementById("slide_panel_view_JavaScript").style.width = "220px";
		}

		function close_Side_Panel_View()
		{
		document.getElementById("slide_panel_view_JavaScript").style.width = "0";
		}

		function dropAllowed(ev1){

		ev1.preventDefault();

		}

		function drag_func(ev1){

		ev1.dataTransfer.setData("text", ev1.target.id);

		}

		function drop_func(ev1){

		ev1.preventDefault();
		var target_data = ev1.dataTransfer.getData("text");
		ev1.target.appendChild(document.getElementById(target_data));

		}

 // Form validation code starts here

 function check_Zip(zip){
    var regex = /^\d{4}$/;
    if(regex.test(zip.value) == false){
   alert("The lenght of zip code must be atleast four digits");
   zip.focus();
   return false;
    }
    if(zip.value == " "){
      alert("Zip code Field cannot be left empty");
      zip.focus();
      return false;
    }
    return regex.test(zip);
  }

  function check_month_Expiry(expmonth){
    var today = new Date();
    var currentmonth = (today.getMonth() + 1);
    var expmonth = parseInt(myform.expmonth.value);
    if((expmonth < currentmonth && expyear == currentyear)
       || month_expire > 12){
      alert("Month Invalid");
       return false;
    }
    else{
        return true;
    }
  }

  function check_year_Expiry(expyear){
    var today = new Date();
    var currentyear = today.getFullYear();
    var expyear = parseInt(myform.expyear.value);
    var length_year = myform.expyear.value.length;
    if( length_year == 2){
        expyear += 2000;
    }
    else if (expyear < currentyear){
      alert("Year is Invalid");
      return false;
    }
    else{
      return true;
    }
  }
 
 function checkForm(form) {
      if( form.firstname.value == "" ) {
         alert( "Please provide your name!" );
         form.firstname.focus() ;
         return false;
      }
      if( form.address.value == "" ) {
         alert( "Please provide your complete Address!" );
         form.address.focus() ;
         return false;
      }
      var regex = /^(([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+([;.](([a-zA-Z0-9_\-\.]+)@{[a-zA-Z0-9_\-\.]+0\.([a-zA-Z]{2,5}){1,25})+)*$/;
      if(!regex.text(form.email.value)){
         alert( "Please enter a valid email address" );
         form.email.focus() ;
         return false;
      }
      if( form.cardname.value == "" ) {
         alert( "Please provide the name on the card!" );
         form.cardname.focus() ;
         return false;
      }
      if( form.cardnumber.value == "" ) {
         alert( "Please provide the card number!" );
         form.cardnumber.focus() ;
         return false;
      }
      if( form.expmonth.value !== "" ) {
          if(!check_month_Expiry(form.expmonth.value)){
         alert( "Please provide the expiry month on the card!" );
         form.expmonth.focus() ;
         return false;
      }
      }
      if( form.expyear.value !== "" ) {
          if(!check_year_Expiry(form.expyear.value)){
         alert( "Please provide the expiry year on the card!" );
         form.expyear.focus() ;
         return false;
      }
      }
      if( form.cvv.value == "" ) {
         alert( "Please provide the cvv on your card!" );
         form.cvv.focus() ;
         return false;
      }
      var regex = /^\d{4}$/;
      if(form.zip.value != "" ) {
      if(!regex.text(form.zip.value)) {
        alert("The zip code you've entered is invalid");
        form.zip.focus();
        return false;
      }}
      
      return(true);
   }
     // Form validation code ends here
</script>
    
</head>
<body onload="loader()">

    <div class="heading">

        <div class="banner-image">
            <!-- The side panel starts from here -->
            <div class="slide_panel_view" id="slide_panel_view_JavaScript">
                <a href="#" class="side_panel_close_button" onclick="close_Side_Panel_View()">x</a>
                <a href="#">Computer/Laptop</a>
                <a href="#">Mobile Phones</a>
                <a href="#">Gaming Console</a>
                <a href="#">Electronic Watch</a>
                <a href="#">Camera</a>
                <a href="#">TV</a>
            </div>

            <button class="side_panel_open_button" onclick="open_Side_Panel_View()">☰</button>
            <!-- The side panel ends  here -->
            <button>Locate Store</button>
            <div class="banner-text">
                <h1 style="font-size:40px">ISIT207 Online Store</h1>


            </div>
        </div>



    </div>

    <hr />


    <br />


    <!-- The Shopping cart starts from here -->
    <div id="middle_stuff" class="middle_box">
        <div id="main">
            <div>
                <h3> Summary </h3>
                <div class="container">
                    <h3>Shopping Cart </h3>
                    <span class="price" style="color:black">
                        <i class="fa fa-shopping-cart"></i>
                    </span>
                    <span id="bubs_total">
                    
                    </span>
                    <hr>
                    <p>Total <span class="price" style="color:black"><b>$<span id="aha"></span></b></span></p>
                </div>

                <!-- The shipping part starts from here -->
                <form method="POST" action="Confirmation.html" onsubmit="return checkForm(this);">
                <div class="row">
                    <div class="col-50">
                        <h3>Billing Address</h3>
                        <label for="fname"><i class="fa fa-user"></i> Full Name</label>
                        <input type="text" id="fname" name="firstname" pattern="[a-zA-Z]+" placeholder="Sam Jacob" required>
                        <label for="email"><i class="fa fa-envelope"></i> Email</label>
                        <input type="text" id="email" name="email" placeholder="john@example.com" pattern="^(([-\w\d]+)(\.[-\w\d]+)*@([-\w\d]+)(\.[-\w\d]+)*(\.([a-zA-Z]{2,5}|[\d]{1,3})){1,2})$" required>
                        <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
                        <input type="text" id="adr" name="address" placeholder="542 W. 15th Street" required>
                        <label for="zip">Zip</label>
                        <input type="text" id="zip" name="zip" placeholder="1001" pattern="[0-9]{4}" required>
                        <h3>Major bank cards aceepted</h3>
                        <label for="fname">Accepted Cards: Visa, Mastercard, Discover, Amex</label>
                            <table>
                                <tr><td><input type="radio" name="payment_card" value="visa"></td><td>Visa</td></tr>
                                <tr><td><input type="radio" name="payment_card" value="mastercard"></td><td>Mastercard</td></tr>
                                <tr><td><input type="radio" name="payment_card" value="discover"></td><td>Discover</td></tr>
                                <tr><td><input type="radio" name="payment_card" value="Amex"></td><td>Amex</td></tr>
                            </table> 
                        <h3>Payment</h3>
                        <label for="ccnum">Credit card number</label> 
                        <input type="text" id="ccnum" name="cardnumber" placeholder="1234567890123456" pattern="^4[0-9]{12}(?:[0-9]{3})?$" required>
                        <label for="expmonth">Exp Month</label>
                        <input type="text" id="expmonth" name="expmonth" placeholder="August" required>
                        <label for="expyear">Exp Year</label>
                        <input type="text" id="expyear" name="expyear" placeholder="2020" required>
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" name="cvv" placeholder="123" required>
                        <button type ="submit" class = "btn" name = "submitOrder" id = "submitOrder">Confirm Order</button>
                        </form>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</body>
</html>